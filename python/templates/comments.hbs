<!DOCTYPE html>
<html lang="en">
<head>
    {{{head}}}
    <link rel="stylesheet" type="text/css" href="/public/styles/stylesComments.css">
    <title>Comentários</title>
</head>
<body>
    <span class="return-home">
        <svg width="10" height="17" viewBox="0 0 10 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M0 7.98365C0 7.51315 0.201645 7.10986 0.537719 6.841L7.93135 0.321163C8.40185 -0.149342 9.20843 -0.0821266 9.67894 0.388378C10.1494 0.858882 10.0822 1.66546 9.61172 2.13596L9.54451 2.20318L3.09188 7.91644C3.02467 7.98365 3.02467 8.05087 3.09188 8.1853L9.54451 13.8986C10.0822 14.3691 10.1494 15.1084 9.67894 15.6461C9.20843 16.1839 8.46907 16.2511 7.93135 15.7806L7.86414 15.7134L0.470504 9.19352C0.201644 8.85745 0 8.45416 0 7.98365Z" fill="white" fill-opacity="0.8"/>
        </svg>
        Voltar
    </span>
    <br>
    <svg width="125" height="5" viewBox="0 0 125 5" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect width="125" height="5" rx="2.5" fill="#31396B"/>
    </svg>

    <h3>Informações da postagem</h3>
    <!-- Exibir informações do post -->
    <div class="post-info">
        <div class="post-author">
            <h1 class="post-title">{{post_title}}</h1>
            <span class="title-author"> • autor da postagem {{post_author}}, publicação {{post_date}}</span>
        </div>
        <p class="post-desc">{{post_description}}</p>

        <div class="post-media">            
            {{#if post_image}}
            <div class="post-image">
                <img class="image-post" src="data:image/png;base64,{{post_image}}" alt="Imagem do Post">
            </div>
            {{/if}}            
            
            {{#if post_video}}
            <div class="post-video">
                <video controls>
                    <source src="data:video/mp4;base64,{{post_video}}" type="video/mp4">
                    Seu navegador não suporta a reprodução de vídeos.
                </video>
            </div>
            {{/if}}
        </div>

        <p class="title-comments"><strong>Comentários:</strong></p>
    </div>

    <form id="commentForm" action="/create-comment" method="POST">
        <div class="comment-field">
            <div class="avatar-box">
                {{#if user_avatar}}
                    <img src="data:image/png;base64,{{user_avatar}}" alt="Seu Avatar" class="avatar">
                {{/if}}
            </div>        
            <label for="post_id" class="hidden">ID do Post:</label>
            <input type="text" id="post_id" class="hidden" name="post_id" value="{{post_id}}" required readonly>
            <input type="text" id="comment" class="commentInput" name="comment" required>
        </div>
        <button type="submit" class="submit-btn">
            <img class="edit-icon" src="/public/assets/sendSubmit.svg" alt="Submit" width="23" height="23">
            Enviar
        </button>
    </form>

    <div class="comment-box">
        {{#each comments}}
            <div class="comments" id="comment-{{id_comment}}">
                <div class="comment-top">
                    <div class="avatar-box">
                        <img src="data:image/png;base64,{{avatar_image}}" alt="Avatar de {{name_user}}" class="avatar">
                    </div>
                    <p class="username"><strong>{{name_user}}</strong></p>
                    <p class="comment-date">• {{comment_date}}</p>
                </div>
                <span id="comment-text-{{id_comment}}" class="commment-text">{{comment}}</span>
                {{#if is_author}}
                    <button class="edit-comment-button" data-comment-id="{{id_comment}}">Editar</button>
                    <button class="delete-comment-button" data-comment-id="{{id_comment}}">Deletar</button> 
                {{/if}}

                <form id="editCommentForm-{{id_comment}}" class="edit-comment-form" data-comment-id="{{id_comment}}" data-post-id="{{p_id_post}}" style="display: none;">
                    <textarea name="comment">{{comment}}</textarea>
                    <button type="submit">Salvar</button>
                </form>
            </div>
        {{/each}}
    </div>
    <script src="/public/scripts/scriptsComment.js"></script>
</body>
</html>

{{!-- Avatar do autor do post --}}
{{!-- <img src="data:image/png;base64,{{post_avatar}}" alt="Avatar do Autor" class="avatar"> --}}